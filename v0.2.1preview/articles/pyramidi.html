<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="pyramidi">
<title>Midi manipulation with pyramidi • pyramidi</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Midi manipulation with pyramidi">
<meta property="og:description" content="pyramidi">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">pyramidi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/pyramidi.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/compose.html">Composing from R</a>
    <a class="dropdown-item" href="../articles/package_workflow.html">Package workflow</a>
    <a class="dropdown-item" href="../articles/functions_usage.html">Usage of pyramidi functions</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/urswilke/pyramidi/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Midi manipulation with pyramidi</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/urswilke/pyramidi/blob/HEAD/vignettes/pyramidi.Rmd" class="external-link"><code>vignettes/pyramidi.Rmd</code></a></small>
      <div class="d-none name"><code>pyramidi.Rmd</code></div>
    </div>

    
    
<p>After installing pyramidi, you can run the helper function to install
its python dependency miditapyr in your environment (in this case
<code>"r-reticulate"</code>):</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pyramidi</span><span class="fu">::</span><span class="fu"><a href="../reference/install_miditapyr.html">install_miditapyr</a></span><span class="op">(</span>envname <span class="op">=</span> <span class="st">"r-reticulate"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using virtual environment 'r-reticulate' ...</span></span>
<span><span class="co">#&gt; + /home/gspusi/.virtualenvs/r-reticulate/bin/python -m pip install --upgrade --no-user miditapyr</span></span></code></pre></div>
<div class="section level2">
<h2 id="load-libraries">Load libraries<a class="anchor" aria-label="anchor" href="#load-libraries"></a>
</h2>
<p>When hopefully everything is set up correctly, we’ll load some
libraries.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/urswilke/pyramidi" class="external-link">pyramidi</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/htmltools" class="external-link">htmltools</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/yonicd/details" class="external-link">details</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="midiframer-class">
<code>MidiFramer</code> class<a class="anchor" aria-label="anchor" href="#midiframer-class"></a>
</h2>
<p>This class is the main structure of the package allowing to read midi
files, manipulate the data, and write it back to disk. You can also use
it to generate the midi data from scratch in R.</p>
<div class="section level3">
<h3 id="generate-midiframer-object">Generate <code>MidiFramer</code> object<a class="anchor" aria-label="anchor" href="#generate-midiframer-object"></a>
</h3>
<p>We’ll create an R6 object of class <code>"MidiFramer"</code> from a
<code>midi_file_path</code> by passing it to the<br>
constructor method <code>MidiFramer$new()</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">midi_file_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test_midi_file.mid"</span>, package <span class="op">=</span> <span class="st">"pyramidi"</span><span class="op">)</span></span>
<span><span class="va">mfr</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/MidiFramer.html">MidiFramer</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">midi_file_path</span><span class="op">)</span></span></code></pre></div>
<pre class="details"><code><span><span class="va">mfr</span></span></code></pre>
<details closed><summary><span title="Click to Open"> Show print output </span>
</summary><div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="sc">&lt;</span>MidiFramer<span class="sc">&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>  Public<span class="sc">:</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>    clone<span class="sc">:</span> <span class="cf">function</span> (<span class="at">deep =</span> <span class="cn">FALSE</span>) </span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>    df_meta<span class="sc">:</span> data.frame</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>    df_not_notes<span class="sc">:</span> data.frame</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>    df_notes_long<span class="sc">:</span> tbl_df, tbl, data.frame</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>    df_notes_wide<span class="sc">:</span> tbl_df, tbl, data.frame</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>    dfm<span class="sc">:</span> tbl_df, tbl, data.frame</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>    initialize<span class="sc">:</span> <span class="cf">function</span> (<span class="at">midi_file_string =</span> <span class="cn">NULL</span>) </span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>    mf<span class="sc">:</span> miditapyr.midi_frame.MidiFrames, python.builtin.object</span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>    midi_file_string<span class="sc">:</span> <span class="er">/</span>home<span class="sc">/</span>gspusi<span class="sc">/</span>R<span class="sc">/</span>x86_64<span class="sc">-</span>pc<span class="sc">-</span>linux<span class="sc">-</span>gnu<span class="sc">-</span>library<span class="sc">/</span><span class="fl">4.3</span><span class="sc">/</span>pyramidi<span class="sc">/</span> ...</span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>    midi_frame_mod<span class="sc">:</span> tbl_df, tbl, data.frame</span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a>    params<span class="sc">:</span> list</span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>    play<span class="sc">:</span> <span class="cf">function</span> (<span class="at">audiofile =</span> <span class="fu">tempfile</span>(<span class="st">"mf_out_"</span>, <span class="at">fileext =</span> <span class="st">".mp3"</span>), </span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a>    populate_r_fields<span class="sc">:</span> <span class="cf">function</span> () </span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a>    ticks_per_beat<span class="sc">:</span> active binding</span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a>    update_notes_wide<span class="sc">:</span> <span class="cf">function</span> (mod) </span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a>  Private<span class="sc">:</span></span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a>    deep_clone<span class="sc">:</span> <span class="cf">function</span> (name, value) </span></code></pre></div>
</details><p><br></p>
</div>
<div class="section level3">
<h3 id="fields-in-midiframer-objects">Fields in <code>MidiFramer</code> objects<a class="anchor" aria-label="anchor" href="#fields-in-midiframer-objects"></a>
</h3>
<p>It is an <a href="https://r6.r-lib.org/" class="external-link">R6</a> object that contains
the following fields:</p>
<pre class="details"><code><span><span class="fu"><a href="https://tibble.tidyverse.org/reference/enframe.html" class="external-link">enframe</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">mfr</span><span class="op">)</span><span class="op">)</span></span></code></pre>
<details closed><summary><span title="Click to Open"> Show print output </span>
</summary><div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a> [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">246</span>m<span class="co"># A tibble: 16 × 2 [39m</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>   name              value                            </span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>    [<span class="dv">3</span>m [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">246</span>m<span class="sc">&lt;</span>chr<span class="sc">&gt;</span> [<span class="dv">39</span>m [<span class="dv">23</span>m              [<span class="dv">3</span>m [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">246</span>m<span class="sc">&lt;</span>list<span class="sc">&gt;</span> [<span class="dv">39</span>m [<span class="dv">23</span>m                           </span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a> [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">250</span>m <span class="dv">1</span> [<span class="dv">39</span>m .__enclos_env__    [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">246</span>m<span class="sc">&lt;</span>env<span class="sc">&gt;</span> [<span class="dv">39</span>m                            </span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a> [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">250</span>m <span class="dv">2</span> [<span class="dv">39</span>m ticks_per_beat     [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">246</span>m<span class="sc">&lt;</span>int [<span class="dv">1</span>]<span class="sc">&gt;</span> [<span class="dv">39</span>m                        </span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a> [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">250</span>m <span class="dv">3</span> [<span class="dv">39</span>m params             [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">246</span>m<span class="sc">&lt;</span>named list [<span class="dv">1</span>]<span class="sc">&gt;</span> [<span class="dv">39</span>m                 </span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a> [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">250</span>m <span class="dv">4</span> [<span class="dv">39</span>m midi_frame_mod     [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">246</span>m<span class="sc">&lt;</span>tibble [<span class="dv">268</span> × <span class="dv">13</span>]<span class="sc">&gt;</span> [<span class="dv">39</span>m              </span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a> [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">250</span>m <span class="dv">5</span> [<span class="dv">39</span>m df_notes_wide      [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">246</span>m<span class="sc">&lt;</span>tibble [<span class="dv">130</span> × <span class="dv">11</span>]<span class="sc">&gt;</span> [<span class="dv">39</span>m              </span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a> [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">250</span>m <span class="dv">6</span> [<span class="dv">39</span>m df_not_notes       [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">246</span>m<span class="sc">&lt;</span>df [<span class="dv">0</span> × <span class="dv">9</span>]<span class="sc">&gt;</span> [<span class="dv">39</span>m                     </span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a> [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">250</span>m <span class="dv">7</span> [<span class="dv">39</span>m df_meta            [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">246</span>m<span class="sc">&lt;</span>df [<span class="dv">8</span> × <span class="dv">12</span>]<span class="sc">&gt;</span> [<span class="dv">39</span>m                    </span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a> [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">250</span>m <span class="dv">8</span> [<span class="dv">39</span>m df_notes_long      [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">246</span>m<span class="sc">&lt;</span>tibble [<span class="dv">260</span> × <span class="dv">9</span>]<span class="sc">&gt;</span> [<span class="dv">39</span>m               </span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a> [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">250</span>m <span class="dv">9</span> [<span class="dv">39</span>m dfm                [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">246</span>m<span class="sc">&lt;</span>tibble [<span class="dv">268</span> × <span class="dv">15</span>]<span class="sc">&gt;</span> [<span class="dv">39</span>m              </span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a> [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">250</span>m10 [<span class="dv">39</span>m mf                 [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">246</span>m<span class="sc">&lt;</span>miditapyr.midi_frame.MidiFrames<span class="sc">&gt;</span> [<span class="dv">39</span>m</span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a> [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">250</span>m11 [<span class="dv">39</span>m midi_file_string   [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">246</span>m<span class="sc">&lt;</span>chr [<span class="dv">1</span>]<span class="sc">&gt;</span> [<span class="dv">39</span>m                        </span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a> [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">250</span>m12 [<span class="dv">39</span>m clone              [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">246</span>m<span class="sc">&lt;</span>fn<span class="sc">&gt;</span> [<span class="dv">39</span>m                             </span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a> [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">250</span>m13 [<span class="dv">39</span>m play               [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">246</span>m<span class="sc">&lt;</span>fn<span class="sc">&gt;</span> [<span class="dv">39</span>m                             </span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a> [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">250</span>m14 [<span class="dv">39</span>m populate_r_fields  [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">246</span>m<span class="sc">&lt;</span>fn<span class="sc">&gt;</span> [<span class="dv">39</span>m                             </span>
<span id="cb7-19"><a href="#cb7-19" tabindex="-1"></a> [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">250</span>m15 [<span class="dv">39</span>m update_notes_wide  [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">246</span>m<span class="sc">&lt;</span>fn<span class="sc">&gt;</span> [<span class="dv">39</span>m                             </span>
<span id="cb7-20"><a href="#cb7-20" tabindex="-1"></a> [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">250</span>m16 [<span class="dv">39</span>m initialize         [<span class="dv">38</span>;<span class="dv">5</span>;<span class="dv">246</span>m<span class="sc">&lt;</span>fn<span class="sc">&gt;</span> [<span class="dv">39</span>m                             </span></code></pre></div>
</details><p><br></p>
<p>Please refer to <code><a href="../reference/MidiFramer.html">help(MidiFramer)</a></code> for more information on
this class. The field <code>mf</code> is a <a href="https://miditapyr.readthedocs.io/en/latest/miditapyr.html#miditapyr.midi_frame.MidiFrames" class="external-link"><code>miditapyr.MidiFrames()</code></a>
object. After its first element <code>mfr$mf$midi_file</code>, a <a href="https://mido.readthedocs.io/en/latest/midi_files.html" class="external-link">mido midi
file object</a> with the mido message data, there are 3 more
dataframes:</p>
<pre class="details"><code><span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="va">mfr</span><span class="op">$</span><span class="va">mf</span><span class="op">$</span><span class="va">midi_frame_raw</span>,</span>
<span>    <span class="va">mfr</span><span class="op">$</span><span class="va">mf</span><span class="op">$</span><span class="va">midi_frame_unnested</span><span class="op">$</span><span class="va">df</span>,</span>
<span>    <span class="va">mfr</span><span class="op">$</span><span class="va">mf</span><span class="op">$</span><span class="va">midi_frame_nested</span><span class="op">$</span><span class="va">df</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">head</span>, <span class="fl">30</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">walk</a></span><span class="op">(</span>\<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre>
<details closed><summary><span title="Click to Open"> Show print output of 30 first rows of these
dataframes </span>
</summary><div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>   i_track  meta                            msg</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="dv">1</span>        <span class="dv">0</span>  <span class="cn">TRUE</span>    track_name, drum<span class="sc">-</span>t1<span class="dv">-1</span><span class="sc">-</span>t1, <span class="dv">0</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="dv">2</span>        <span class="dv">0</span> <span class="cn">FALSE</span>          note_on, <span class="dv">0</span>, <span class="dv">43</span>, <span class="dv">72</span>, <span class="dv">9</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="dv">3</span>        <span class="dv">0</span> <span class="cn">FALSE</span>          note_on, <span class="dv">0</span>, <span class="dv">39</span>, <span class="dv">64</span>, <span class="dv">9</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="dv">4</span>        <span class="dv">0</span> <span class="cn">FALSE</span>         note_on, <span class="dv">0</span>, <span class="dv">36</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="dv">5</span>        <span class="dv">0</span>  <span class="cn">TRUE</span>           set_tempo, <span class="dv">666666</span>, <span class="dv">0</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="dv">6</span>        <span class="dv">0</span>  <span class="cn">TRUE</span> time_signature, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">24</span>, <span class="dv">8</span>, <span class="dv">0</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="dv">7</span>        <span class="dv">0</span> <span class="cn">FALSE</span>       note_off, <span class="dv">240</span>, <span class="dv">43</span>, <span class="dv">72</span>, <span class="dv">9</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="dv">8</span>        <span class="dv">0</span> <span class="cn">FALSE</span>         note_off, <span class="dv">0</span>, <span class="dv">39</span>, <span class="dv">64</span>, <span class="dv">9</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="dv">9</span>        <span class="dv">0</span> <span class="cn">FALSE</span>        note_off, <span class="dv">0</span>, <span class="dv">36</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="dv">10</span>       <span class="dv">0</span> <span class="cn">FALSE</span>       note_on, <span class="dv">240</span>, <span class="dv">42</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a><span class="dv">11</span>       <span class="dv">0</span> <span class="cn">FALSE</span>         note_on, <span class="dv">0</span>, <span class="dv">38</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a><span class="dv">12</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_on, <span class="dv">240</span>, <span class="dv">43</span>, <span class="dv">64</span>, <span class="dv">9</span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a><span class="dv">13</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_off, <span class="dv">0</span>, <span class="dv">42</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a><span class="dv">14</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_off, <span class="dv">0</span>, <span class="dv">38</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a><span class="dv">15</span>       <span class="dv">0</span> <span class="cn">FALSE</span>       note_off, <span class="dv">240</span>, <span class="dv">43</span>, <span class="dv">64</span>, <span class="dv">9</span></span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a><span class="dv">16</span>       <span class="dv">0</span> <span class="cn">FALSE</span>         note_on, <span class="dv">0</span>, <span class="dv">36</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a><span class="dv">17</span>       <span class="dv">0</span> <span class="cn">FALSE</span>      note_off, <span class="dv">240</span>, <span class="dv">36</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a><span class="dv">18</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_on, <span class="dv">240</span>, <span class="dv">43</span>, <span class="dv">60</span>, <span class="dv">9</span></span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a><span class="dv">19</span>       <span class="dv">0</span> <span class="cn">FALSE</span>         note_on, <span class="dv">0</span>, <span class="dv">42</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a><span class="dv">20</span>       <span class="dv">0</span> <span class="cn">FALSE</span>       note_off, <span class="dv">240</span>, <span class="dv">43</span>, <span class="dv">60</span>, <span class="dv">9</span></span>
<span id="cb9-24"><a href="#cb9-24" tabindex="-1"></a><span class="dv">21</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_off, <span class="dv">0</span>, <span class="dv">42</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-25"><a href="#cb9-25" tabindex="-1"></a><span class="dv">22</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_on, <span class="dv">240</span>, <span class="dv">43</span>, <span class="dv">60</span>, <span class="dv">9</span></span>
<span id="cb9-26"><a href="#cb9-26" tabindex="-1"></a><span class="dv">23</span>       <span class="dv">0</span> <span class="cn">FALSE</span>          note_on, <span class="dv">0</span>, <span class="dv">39</span>, <span class="dv">66</span>, <span class="dv">9</span></span>
<span id="cb9-27"><a href="#cb9-27" tabindex="-1"></a><span class="dv">24</span>       <span class="dv">0</span> <span class="cn">FALSE</span>         note_on, <span class="dv">0</span>, <span class="dv">36</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-28"><a href="#cb9-28" tabindex="-1"></a><span class="dv">25</span>       <span class="dv">0</span> <span class="cn">FALSE</span>       note_off, <span class="dv">240</span>, <span class="dv">43</span>, <span class="dv">60</span>, <span class="dv">9</span></span>
<span id="cb9-29"><a href="#cb9-29" tabindex="-1"></a><span class="dv">26</span>       <span class="dv">0</span> <span class="cn">FALSE</span>         note_off, <span class="dv">0</span>, <span class="dv">39</span>, <span class="dv">66</span>, <span class="dv">9</span></span>
<span id="cb9-30"><a href="#cb9-30" tabindex="-1"></a><span class="dv">27</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_off, <span class="dv">0</span>, <span class="dv">36</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-31"><a href="#cb9-31" tabindex="-1"></a><span class="dv">28</span>       <span class="dv">0</span> <span class="cn">FALSE</span>       note_on, <span class="dv">240</span>, <span class="dv">42</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-32"><a href="#cb9-32" tabindex="-1"></a><span class="dv">29</span>       <span class="dv">0</span> <span class="cn">FALSE</span>         note_on, <span class="dv">0</span>, <span class="dv">38</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-33"><a href="#cb9-33" tabindex="-1"></a><span class="dv">30</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_on, <span class="dv">240</span>, <span class="dv">43</span>, <span class="dv">53</span>, <span class="dv">9</span></span>
<span id="cb9-34"><a href="#cb9-34" tabindex="-1"></a></span>
<span id="cb9-35"><a href="#cb9-35" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb9-36"><a href="#cb9-36" tabindex="-1"></a>   i_track  meta           type         name time note velocity channel  tempo</span>
<span id="cb9-37"><a href="#cb9-37" tabindex="-1"></a><span class="dv">1</span>        <span class="dv">0</span>  <span class="cn">TRUE</span>     track_name drum<span class="sc">-</span>t1<span class="dv">-1</span><span class="sc">-</span>t1    <span class="dv">0</span>  <span class="cn">NaN</span>      <span class="cn">NaN</span>     <span class="cn">NaN</span>    <span class="cn">NaN</span></span>
<span id="cb9-38"><a href="#cb9-38" tabindex="-1"></a><span class="dv">2</span>        <span class="dv">0</span> <span class="cn">FALSE</span>        note_on         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>    <span class="dv">0</span>   <span class="dv">43</span>       <span class="dv">72</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-39"><a href="#cb9-39" tabindex="-1"></a><span class="dv">3</span>        <span class="dv">0</span> <span class="cn">FALSE</span>        note_on         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>    <span class="dv">0</span>   <span class="dv">39</span>       <span class="dv">64</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-40"><a href="#cb9-40" tabindex="-1"></a><span class="dv">4</span>        <span class="dv">0</span> <span class="cn">FALSE</span>        note_on         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>    <span class="dv">0</span>   <span class="dv">36</span>      <span class="dv">101</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-41"><a href="#cb9-41" tabindex="-1"></a><span class="dv">5</span>        <span class="dv">0</span>  <span class="cn">TRUE</span>      set_tempo         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>    <span class="dv">0</span>  <span class="cn">NaN</span>      <span class="cn">NaN</span>     <span class="cn">NaN</span> <span class="dv">666666</span></span>
<span id="cb9-42"><a href="#cb9-42" tabindex="-1"></a><span class="dv">6</span>        <span class="dv">0</span>  <span class="cn">TRUE</span> time_signature         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>    <span class="dv">0</span>  <span class="cn">NaN</span>      <span class="cn">NaN</span>     <span class="cn">NaN</span>    <span class="cn">NaN</span></span>
<span id="cb9-43"><a href="#cb9-43" tabindex="-1"></a><span class="dv">7</span>        <span class="dv">0</span> <span class="cn">FALSE</span>       note_off         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">240</span>   <span class="dv">43</span>       <span class="dv">72</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-44"><a href="#cb9-44" tabindex="-1"></a><span class="dv">8</span>        <span class="dv">0</span> <span class="cn">FALSE</span>       note_off         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>    <span class="dv">0</span>   <span class="dv">39</span>       <span class="dv">64</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-45"><a href="#cb9-45" tabindex="-1"></a><span class="dv">9</span>        <span class="dv">0</span> <span class="cn">FALSE</span>       note_off         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>    <span class="dv">0</span>   <span class="dv">36</span>      <span class="dv">101</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-46"><a href="#cb9-46" tabindex="-1"></a><span class="dv">10</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_on         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">240</span>   <span class="dv">42</span>      <span class="dv">101</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-47"><a href="#cb9-47" tabindex="-1"></a><span class="dv">11</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_on         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>    <span class="dv">0</span>   <span class="dv">38</span>      <span class="dv">101</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-48"><a href="#cb9-48" tabindex="-1"></a><span class="dv">12</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_on         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">240</span>   <span class="dv">43</span>       <span class="dv">64</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-49"><a href="#cb9-49" tabindex="-1"></a><span class="dv">13</span>       <span class="dv">0</span> <span class="cn">FALSE</span>       note_off         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>    <span class="dv">0</span>   <span class="dv">42</span>      <span class="dv">101</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-50"><a href="#cb9-50" tabindex="-1"></a><span class="dv">14</span>       <span class="dv">0</span> <span class="cn">FALSE</span>       note_off         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>    <span class="dv">0</span>   <span class="dv">38</span>      <span class="dv">101</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-51"><a href="#cb9-51" tabindex="-1"></a><span class="dv">15</span>       <span class="dv">0</span> <span class="cn">FALSE</span>       note_off         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">240</span>   <span class="dv">43</span>       <span class="dv">64</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-52"><a href="#cb9-52" tabindex="-1"></a><span class="dv">16</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_on         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>    <span class="dv">0</span>   <span class="dv">36</span>      <span class="dv">101</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-53"><a href="#cb9-53" tabindex="-1"></a><span class="dv">17</span>       <span class="dv">0</span> <span class="cn">FALSE</span>       note_off         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">240</span>   <span class="dv">36</span>      <span class="dv">101</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-54"><a href="#cb9-54" tabindex="-1"></a><span class="dv">18</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_on         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">240</span>   <span class="dv">43</span>       <span class="dv">60</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-55"><a href="#cb9-55" tabindex="-1"></a><span class="dv">19</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_on         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>    <span class="dv">0</span>   <span class="dv">42</span>      <span class="dv">101</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-56"><a href="#cb9-56" tabindex="-1"></a><span class="dv">20</span>       <span class="dv">0</span> <span class="cn">FALSE</span>       note_off         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">240</span>   <span class="dv">43</span>       <span class="dv">60</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-57"><a href="#cb9-57" tabindex="-1"></a><span class="dv">21</span>       <span class="dv">0</span> <span class="cn">FALSE</span>       note_off         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>    <span class="dv">0</span>   <span class="dv">42</span>      <span class="dv">101</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-58"><a href="#cb9-58" tabindex="-1"></a><span class="dv">22</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_on         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">240</span>   <span class="dv">43</span>       <span class="dv">60</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-59"><a href="#cb9-59" tabindex="-1"></a><span class="dv">23</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_on         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>    <span class="dv">0</span>   <span class="dv">39</span>       <span class="dv">66</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-60"><a href="#cb9-60" tabindex="-1"></a><span class="dv">24</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_on         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>    <span class="dv">0</span>   <span class="dv">36</span>      <span class="dv">101</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-61"><a href="#cb9-61" tabindex="-1"></a><span class="dv">25</span>       <span class="dv">0</span> <span class="cn">FALSE</span>       note_off         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">240</span>   <span class="dv">43</span>       <span class="dv">60</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-62"><a href="#cb9-62" tabindex="-1"></a><span class="dv">26</span>       <span class="dv">0</span> <span class="cn">FALSE</span>       note_off         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>    <span class="dv">0</span>   <span class="dv">39</span>       <span class="dv">66</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-63"><a href="#cb9-63" tabindex="-1"></a><span class="dv">27</span>       <span class="dv">0</span> <span class="cn">FALSE</span>       note_off         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>    <span class="dv">0</span>   <span class="dv">36</span>      <span class="dv">101</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-64"><a href="#cb9-64" tabindex="-1"></a><span class="dv">28</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_on         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">240</span>   <span class="dv">42</span>      <span class="dv">101</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-65"><a href="#cb9-65" tabindex="-1"></a><span class="dv">29</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_on         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>    <span class="dv">0</span>   <span class="dv">38</span>      <span class="dv">101</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-66"><a href="#cb9-66" tabindex="-1"></a><span class="dv">30</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_on         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  <span class="dv">240</span>   <span class="dv">43</span>       <span class="dv">53</span>       <span class="dv">9</span>    <span class="cn">NaN</span></span>
<span id="cb9-67"><a href="#cb9-67" tabindex="-1"></a>   numerator denominator clocks_per_click notated_32nd_notes_per_beat</span>
<span id="cb9-68"><a href="#cb9-68" tabindex="-1"></a><span class="dv">1</span>        <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-69"><a href="#cb9-69" tabindex="-1"></a><span class="dv">2</span>        <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-70"><a href="#cb9-70" tabindex="-1"></a><span class="dv">3</span>        <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-71"><a href="#cb9-71" tabindex="-1"></a><span class="dv">4</span>        <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-72"><a href="#cb9-72" tabindex="-1"></a><span class="dv">5</span>        <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-73"><a href="#cb9-73" tabindex="-1"></a><span class="dv">6</span>          <span class="dv">4</span>           <span class="dv">4</span>               <span class="dv">24</span>                           <span class="dv">8</span></span>
<span id="cb9-74"><a href="#cb9-74" tabindex="-1"></a><span class="dv">7</span>        <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-75"><a href="#cb9-75" tabindex="-1"></a><span class="dv">8</span>        <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-76"><a href="#cb9-76" tabindex="-1"></a><span class="dv">9</span>        <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-77"><a href="#cb9-77" tabindex="-1"></a><span class="dv">10</span>       <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-78"><a href="#cb9-78" tabindex="-1"></a><span class="dv">11</span>       <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-79"><a href="#cb9-79" tabindex="-1"></a><span class="dv">12</span>       <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-80"><a href="#cb9-80" tabindex="-1"></a><span class="dv">13</span>       <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-81"><a href="#cb9-81" tabindex="-1"></a><span class="dv">14</span>       <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-82"><a href="#cb9-82" tabindex="-1"></a><span class="dv">15</span>       <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-83"><a href="#cb9-83" tabindex="-1"></a><span class="dv">16</span>       <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-84"><a href="#cb9-84" tabindex="-1"></a><span class="dv">17</span>       <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-85"><a href="#cb9-85" tabindex="-1"></a><span class="dv">18</span>       <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-86"><a href="#cb9-86" tabindex="-1"></a><span class="dv">19</span>       <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-87"><a href="#cb9-87" tabindex="-1"></a><span class="dv">20</span>       <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-88"><a href="#cb9-88" tabindex="-1"></a><span class="dv">21</span>       <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-89"><a href="#cb9-89" tabindex="-1"></a><span class="dv">22</span>       <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-90"><a href="#cb9-90" tabindex="-1"></a><span class="dv">23</span>       <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-91"><a href="#cb9-91" tabindex="-1"></a><span class="dv">24</span>       <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-92"><a href="#cb9-92" tabindex="-1"></a><span class="dv">25</span>       <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-93"><a href="#cb9-93" tabindex="-1"></a><span class="dv">26</span>       <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-94"><a href="#cb9-94" tabindex="-1"></a><span class="dv">27</span>       <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-95"><a href="#cb9-95" tabindex="-1"></a><span class="dv">28</span>       <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-96"><a href="#cb9-96" tabindex="-1"></a><span class="dv">29</span>       <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-97"><a href="#cb9-97" tabindex="-1"></a><span class="dv">30</span>       <span class="cn">NaN</span>         <span class="cn">NaN</span>              <span class="cn">NaN</span>                         <span class="cn">NaN</span></span>
<span id="cb9-98"><a href="#cb9-98" tabindex="-1"></a></span>
<span id="cb9-99"><a href="#cb9-99" tabindex="-1"></a>[[<span class="dv">3</span>]]</span>
<span id="cb9-100"><a href="#cb9-100" tabindex="-1"></a>   i_track  meta                            msg</span>
<span id="cb9-101"><a href="#cb9-101" tabindex="-1"></a><span class="dv">1</span>        <span class="dv">0</span>  <span class="cn">TRUE</span>    track_name, drum<span class="sc">-</span>t1<span class="dv">-1</span><span class="sc">-</span>t1, <span class="dv">0</span></span>
<span id="cb9-102"><a href="#cb9-102" tabindex="-1"></a><span class="dv">2</span>        <span class="dv">0</span> <span class="cn">FALSE</span>          note_on, <span class="dv">0</span>, <span class="dv">43</span>, <span class="dv">72</span>, <span class="dv">9</span></span>
<span id="cb9-103"><a href="#cb9-103" tabindex="-1"></a><span class="dv">3</span>        <span class="dv">0</span> <span class="cn">FALSE</span>          note_on, <span class="dv">0</span>, <span class="dv">39</span>, <span class="dv">64</span>, <span class="dv">9</span></span>
<span id="cb9-104"><a href="#cb9-104" tabindex="-1"></a><span class="dv">4</span>        <span class="dv">0</span> <span class="cn">FALSE</span>         note_on, <span class="dv">0</span>, <span class="dv">36</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-105"><a href="#cb9-105" tabindex="-1"></a><span class="dv">5</span>        <span class="dv">0</span>  <span class="cn">TRUE</span>           set_tempo, <span class="dv">0</span>, <span class="dv">666666</span></span>
<span id="cb9-106"><a href="#cb9-106" tabindex="-1"></a><span class="dv">6</span>        <span class="dv">0</span>  <span class="cn">TRUE</span> time_signature, <span class="dv">0</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">24</span>, <span class="dv">8</span></span>
<span id="cb9-107"><a href="#cb9-107" tabindex="-1"></a><span class="dv">7</span>        <span class="dv">0</span> <span class="cn">FALSE</span>       note_off, <span class="dv">240</span>, <span class="dv">43</span>, <span class="dv">72</span>, <span class="dv">9</span></span>
<span id="cb9-108"><a href="#cb9-108" tabindex="-1"></a><span class="dv">8</span>        <span class="dv">0</span> <span class="cn">FALSE</span>         note_off, <span class="dv">0</span>, <span class="dv">39</span>, <span class="dv">64</span>, <span class="dv">9</span></span>
<span id="cb9-109"><a href="#cb9-109" tabindex="-1"></a><span class="dv">9</span>        <span class="dv">0</span> <span class="cn">FALSE</span>        note_off, <span class="dv">0</span>, <span class="dv">36</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-110"><a href="#cb9-110" tabindex="-1"></a><span class="dv">10</span>       <span class="dv">0</span> <span class="cn">FALSE</span>       note_on, <span class="dv">240</span>, <span class="dv">42</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-111"><a href="#cb9-111" tabindex="-1"></a><span class="dv">11</span>       <span class="dv">0</span> <span class="cn">FALSE</span>         note_on, <span class="dv">0</span>, <span class="dv">38</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-112"><a href="#cb9-112" tabindex="-1"></a><span class="dv">12</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_on, <span class="dv">240</span>, <span class="dv">43</span>, <span class="dv">64</span>, <span class="dv">9</span></span>
<span id="cb9-113"><a href="#cb9-113" tabindex="-1"></a><span class="dv">13</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_off, <span class="dv">0</span>, <span class="dv">42</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-114"><a href="#cb9-114" tabindex="-1"></a><span class="dv">14</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_off, <span class="dv">0</span>, <span class="dv">38</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-115"><a href="#cb9-115" tabindex="-1"></a><span class="dv">15</span>       <span class="dv">0</span> <span class="cn">FALSE</span>       note_off, <span class="dv">240</span>, <span class="dv">43</span>, <span class="dv">64</span>, <span class="dv">9</span></span>
<span id="cb9-116"><a href="#cb9-116" tabindex="-1"></a><span class="dv">16</span>       <span class="dv">0</span> <span class="cn">FALSE</span>         note_on, <span class="dv">0</span>, <span class="dv">36</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-117"><a href="#cb9-117" tabindex="-1"></a><span class="dv">17</span>       <span class="dv">0</span> <span class="cn">FALSE</span>      note_off, <span class="dv">240</span>, <span class="dv">36</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-118"><a href="#cb9-118" tabindex="-1"></a><span class="dv">18</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_on, <span class="dv">240</span>, <span class="dv">43</span>, <span class="dv">60</span>, <span class="dv">9</span></span>
<span id="cb9-119"><a href="#cb9-119" tabindex="-1"></a><span class="dv">19</span>       <span class="dv">0</span> <span class="cn">FALSE</span>         note_on, <span class="dv">0</span>, <span class="dv">42</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-120"><a href="#cb9-120" tabindex="-1"></a><span class="dv">20</span>       <span class="dv">0</span> <span class="cn">FALSE</span>       note_off, <span class="dv">240</span>, <span class="dv">43</span>, <span class="dv">60</span>, <span class="dv">9</span></span>
<span id="cb9-121"><a href="#cb9-121" tabindex="-1"></a><span class="dv">21</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_off, <span class="dv">0</span>, <span class="dv">42</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-122"><a href="#cb9-122" tabindex="-1"></a><span class="dv">22</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_on, <span class="dv">240</span>, <span class="dv">43</span>, <span class="dv">60</span>, <span class="dv">9</span></span>
<span id="cb9-123"><a href="#cb9-123" tabindex="-1"></a><span class="dv">23</span>       <span class="dv">0</span> <span class="cn">FALSE</span>          note_on, <span class="dv">0</span>, <span class="dv">39</span>, <span class="dv">66</span>, <span class="dv">9</span></span>
<span id="cb9-124"><a href="#cb9-124" tabindex="-1"></a><span class="dv">24</span>       <span class="dv">0</span> <span class="cn">FALSE</span>         note_on, <span class="dv">0</span>, <span class="dv">36</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-125"><a href="#cb9-125" tabindex="-1"></a><span class="dv">25</span>       <span class="dv">0</span> <span class="cn">FALSE</span>       note_off, <span class="dv">240</span>, <span class="dv">43</span>, <span class="dv">60</span>, <span class="dv">9</span></span>
<span id="cb9-126"><a href="#cb9-126" tabindex="-1"></a><span class="dv">26</span>       <span class="dv">0</span> <span class="cn">FALSE</span>         note_off, <span class="dv">0</span>, <span class="dv">39</span>, <span class="dv">66</span>, <span class="dv">9</span></span>
<span id="cb9-127"><a href="#cb9-127" tabindex="-1"></a><span class="dv">27</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_off, <span class="dv">0</span>, <span class="dv">36</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-128"><a href="#cb9-128" tabindex="-1"></a><span class="dv">28</span>       <span class="dv">0</span> <span class="cn">FALSE</span>       note_on, <span class="dv">240</span>, <span class="dv">42</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-129"><a href="#cb9-129" tabindex="-1"></a><span class="dv">29</span>       <span class="dv">0</span> <span class="cn">FALSE</span>         note_on, <span class="dv">0</span>, <span class="dv">38</span>, <span class="dv">101</span>, <span class="dv">9</span></span>
<span id="cb9-130"><a href="#cb9-130" tabindex="-1"></a><span class="dv">30</span>       <span class="dv">0</span> <span class="cn">FALSE</span>        note_on, <span class="dv">240</span>, <span class="dv">43</span>, <span class="dv">53</span>, <span class="dv">9</span></span></code></pre></div>
</details><p><br></p>
<p>When <code>mf</code> is initialized <code>midi_frame_raw</code> and
<code>midi_frame_nested$df</code> should be the same (except the
ordering of the named fields in the <code>msg</code> column might
differ).</p>
<p>For a detailed interactive overview with further links showing how
the various fields in the <code>MidiFramer</code> class are related and
calculated see <code><a href="../articles/package_workflow.html">vignette("package_workflow")</a></code>.</p>
</div>
<div class="section level3">
<h3 id="populating-an-empty-midiframer-object">Populating an empty <code>MidiFramer</code> object<a class="anchor" aria-label="anchor" href="#populating-an-empty-midiframer-object"></a>
</h3>
<p>You could also achieve the same result by first creating an empty
<code>MidiFramer</code> object like so:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mfr</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/MidiFramer.html">MidiFramer</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="details"><code><span><span class="va">mfr</span></span></code></pre>
<details closed><summary><span title="Click to Open"> Show print output </span>
</summary><div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="sc">&lt;</span>MidiFramer<span class="sc">&gt;</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>  Public<span class="sc">:</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>    clone<span class="sc">:</span> <span class="cf">function</span> (<span class="at">deep =</span> <span class="cn">FALSE</span>) </span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>    df_meta<span class="sc">:</span> <span class="cn">NULL</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>    df_not_notes<span class="sc">:</span> <span class="cn">NULL</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>    df_notes_long<span class="sc">:</span> <span class="cn">NULL</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>    df_notes_wide<span class="sc">:</span> <span class="cn">NULL</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>    dfm<span class="sc">:</span> <span class="cn">NULL</span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a>    initialize<span class="sc">:</span> <span class="cf">function</span> (<span class="at">midi_file_string =</span> <span class="cn">NULL</span>) </span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a>    mf<span class="sc">:</span> miditapyr.midi_frame.MidiFrames, python.builtin.object</span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a>    midi_file_string<span class="sc">:</span> <span class="cn">NULL</span></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a>    midi_frame_mod<span class="sc">:</span> <span class="cn">NULL</span></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a>    params<span class="sc">:</span> list</span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a>    play<span class="sc">:</span> <span class="cf">function</span> (<span class="at">audiofile =</span> <span class="fu">tempfile</span>(<span class="st">"mf_out_"</span>, <span class="at">fileext =</span> <span class="st">".mp3"</span>), </span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a>    populate_r_fields<span class="sc">:</span> <span class="cf">function</span> () </span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a>    ticks_per_beat<span class="sc">:</span> active binding</span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a>    update_notes_wide<span class="sc">:</span> <span class="cf">function</span> (mod) </span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a>  Private<span class="sc">:</span></span>
<span id="cb12-20"><a href="#cb12-20" tabindex="-1"></a>    deep_clone<span class="sc">:</span> <span class="cf">function</span> (name, value) </span></code></pre></div>
</details><p><br></p>
<p>In this case all the dataframe fields are initialized to
<code>NULL</code> (or <code>None</code> in python which reticulate also
translates to <code>NULL</code> in R).</p>
<p>In order to load a midi file to <code>mfr$mf</code> you have to use
the miditapyr method <a href="https://miditapyr.readthedocs.io/en/latest/miditapyr.html#miditapyr.midi_frame.MidiFrames.calc_attributes" class="external-link"><code>calc_attributes()</code></a>:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mfr</span><span class="op">$</span><span class="va">mf</span><span class="op">$</span><span class="fu">calc_attributes</span><span class="op">(</span><span class="va">midi_file_path</span><span class="op">)</span></span></code></pre></div>
<p>Then you can populate the fields of <code>mfr</code> with the
<code>MidiFramer</code> method <a href="https://urswilke.github.io/pyramidi/reference/MidiFramer.html#method-populate_r_fields" class="external-link"><code>populate_r_fields()</code></a>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mfr</span><span class="op">$</span><span class="fu">populate_r_fields</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="modifying-midi-data">Modifying midi data<a class="anchor" aria-label="anchor" href="#modifying-midi-data"></a>
</h3>
<p>In the <code>MidiFramer</code> object, we can modify
<code>mfr$df_notes_wide</code>, the notes in note-wise wide format
(<code>note_on</code> &amp; <code>note_off</code> events in the same
line). Thus we don’t need to worry which midi events belong together</p>
<p>Let’s look at a small example. We’ll define a function to replace
every note with a random midi note between 60 &amp; 71:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">dfn</span>, <span class="va">seed</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">n_notes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">dfn</span><span class="op">$</span><span class="va">note</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">dfn</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>note <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span></span>
<span>    <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">note</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">60</span><span class="op">:</span><span class="fl">71</span>, <span class="va">n_notes</span>, <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    <span class="va">note</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>We could modify the notes in wide format like this:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mod</span><span class="op">(</span><span class="va">mfr</span><span class="op">$</span><span class="va">df_notes_wide</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 130 × 11</span></span></span>
<span><span class="co">#&gt;    i_track meta   note channel i_note velocity_note_on velocity_note_off</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>       0 FALSE    67       9      1               72                72</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>       0 FALSE    61       9      1               64                64</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>       0 FALSE    67       9      1              101               101</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>       0 FALSE    71       9      1              101               101</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>       0 FALSE    67       9      1              101               101</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>       0 FALSE    62       9      2               64                64</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>       0 FALSE    61       9      2              101               101</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>       0 FALSE    68       9      3               60                60</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>       0 FALSE    71       9      2              101               101</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>       0 FALSE    60       9      4               60                60</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 120 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 4 more variables: ticks_note_on &lt;dbl&gt;, ticks_note_off &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   b_note_on &lt;dbl&gt;, b_note_off &lt;dbl&gt;</span></span></span></code></pre></div>
<p>Then we would have to adapt all the following elements of
<code>mfr</code> that depend on <code>mfr$df_notes_wide</code>.</p>
<p>When we call the method <code>mfr$update_notes_wide()</code>, all the
depending list elements are also automatically updated.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Apply the modification to mfr$df_notes_wide and all depending dataframes:</span></span>
<span><span class="va">mfr</span><span class="op">$</span><span class="fu">update_notes_wide</span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span></code></pre></div>
<p>The data has also been changed in <code>mfr$mf</code> the miditapyr
<code>MidiFrames</code> object in mfr:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mfr</span><span class="op">$</span><span class="va">mf</span><span class="op">$</span><span class="va">midi_frame_nested</span><span class="op">$</span><span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;   i_track  meta                            msg</span></span>
<span><span class="co">#&gt; 1       0 FALSE          9, 68, note_on, 72, 0</span></span>
<span><span class="co">#&gt; 2       0 FALSE          9, 69, note_on, 64, 0</span></span>
<span><span class="co">#&gt; 3       0 FALSE         9, 65, note_on, 101, 0</span></span>
<span><span class="co">#&gt; 4       0  TRUE    track_name, drum-t1-1-t1, 0</span></span>
<span><span class="co">#&gt; 5       0  TRUE           set_tempo, 666666, 0</span></span>
<span><span class="co">#&gt; 6       0  TRUE time_signature, 4, 4, 24, 8, 0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="writing-modified-midi-files">Writing modified midi files<a class="anchor" aria-label="anchor" href="#writing-modified-midi-files"></a>
</h3>
<p>Thus we can now directly save the modifications to a midi file:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">midifile</span> <span class="op">&lt;-</span> <span class="st">"mod_test_midi_file.mid"</span></span>
<span><span class="va">mfr</span><span class="op">$</span><span class="va">mf</span><span class="op">$</span><span class="fu">write_file</span><span class="op">(</span><span class="va">midifile</span><span class="op">)</span></span></code></pre></div>
<p>For a more extensive and less arbitrary demo how to compose your own
music with pyramidi, see <code><a href="../articles/compose.html">vignette("compose")</a></code>.</p>
</div>
<div class="section level3">
<h3 id="playing-audio">Playing audio<a class="anchor" aria-label="anchor" href="#playing-audio"></a>
</h3>
<p><strong>You need to install <a href="https://www.fluidsynth.org/" class="external-link">fluidsynth</a> on your computer and
the <a href="https://docs.ropensci.org/fluidsynth/index.html" class="external-link">R
package</a> (which should be installed with pyramidi) if you want to do
that on your computer.</strong></p>
<p>If you want to produce audio files from the midi files you can
synthesize them with the convenience function <code><a href="../reference/player.html">player()</a></code></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">midifile</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/player.html">player</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<audio><source src="mod_test_midi_file.mp3"></source></audio><p>As you can hear, the <code><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample()</a></code> function in
<code>mod()</code> changed all midi notes randomly.</p>
<p>You can also listen to your synthesized files by embedding an audio
player for the <code>MidiFramer</code> object:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mfr</span><span class="op">$</span><span class="fu">play</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<audio><source src="/tmp/RtmpolkkgP/mf_out_e009e140dd7b1.mp3"></source></audio><p>When using R interactively, this will directly play the generated
audio in the console.</p>
</div>
<div class="section level3">
<h3 id="multiple-results">Multiple results<a class="anchor" aria-label="anchor" href="#multiple-results"></a>
</h3>
<p>One of the reasons to create this package was that R might help to
avoid repetitive work. See below how you can use functional programming
approaches of <a href="https://purrr.tidyverse.org/" class="external-link">purrr</a>, to
generate multiple midi files in one call (actually two calls for more
clarity but you could also put them in one).</p>
<p>You can also generate a list of multiple <code>MidiFramer</code>
objects (in this case 2) and apply different modifications to each:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">l_mfr</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rlang.r-lib.org/reference/set_names.html" class="external-link">set_names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"test"</span>, <span class="va">.</span>, <span class="st">".mp3"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="op">~</span><span class="va">mfr</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">$</span><span class="fu">update_notes_wide</span><span class="op">(</span><span class="va">mod</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>And if you want to successively add modifications to the same object
and store all intermediate results in a list, you could do it like
this:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">l_mfr2</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rlang.r-lib.org/reference/set_names.html" class="external-link">set_names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"test"</span>, <span class="va">.</span>, <span class="st">".mp3"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/accumulate.html" class="external-link">accumulate</a></span><span class="op">(</span><span class="op">~</span><span class="va">.x</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">$</span><span class="fu">update_notes_wide</span><span class="op">(</span><span class="va">mod</span><span class="op">)</span>, .init <span class="op">=</span> <span class="va">mfr</span><span class="op">)</span></span></code></pre></div>
<p>Please note that we made deep copies
(<code>$clone(deep = TRUE)</code>) of the <code>MidiFramer</code> object
in the list <code>l_mfr</code>. Otherwise the field of the python <a href="https://miditapyr.readthedocs.io/en/latest/miditapyr.html#miditapyr.midi_frame.MidiFrames" class="external-link"><code>miditapyr.MidiFrames</code></a>
object <code>mf</code> is a shallow copy. This means that updates to one
of these elements in <code>l_mfr</code> (for instance
<code>l_mfr[[1]]$mf</code>) also change the others, because they all are
references to the same object.</p>
<p>This is how you can embed multiple audio files in an rmarkdown
document using <code><a href="https://purrr.tidyverse.org/reference/imap.html" class="external-link">purrr::imap()</a></code>:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/tagList.html" class="external-link">tagList</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/imap.html" class="external-link">imap</a></span><span class="op">(</span></span>
<span>    <span class="va">l_mfr</span>, </span>
<span>    <span class="op">~</span> <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h4</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"audio result"</span>, <span class="va">.y</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      <span class="va">.x</span><span class="op">$</span><span class="fu">play</span><span class="op">(</span>audiofile <span class="op">=</span> <span class="va">.y</span><span class="op">)</span>,</span>
<span>      <span class="co"># add 2 line breaks to vertically separate a bit:</span></span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">br</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">br</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div>
<h4>audio result test1.mp3</h4>
<audio><source src="test1.mp3"></source></audio><br><br>
</div>
<div>
<h4>audio result test2.mp3</h4>
<audio><source src="test2.mp3"></source></audio><br><br>
</div>
<p>Compared to the two audio samples in <a href="#playing-audio">Playing
audio</a> (which are the same), we now have two different results.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Urs Wilke.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
